@{
    ViewBag.Title = "Radius";
}

<hr/>	

<div class="container-fluid">

	<div class="row">
		<div class="col-xs-3">
			<input type="text" name="login" value="" class="form-control" id="login" placeholder="Введите логин">
		</div>
		<div class="col-xs-3">
			<input type="text" class="form-control tcal" readonly="readonly" id="datebgn" placeholder="Дата начало периода" style="cursor: pointer">
		</div>
		<div class="col-xs-3">
			<input type="text" class="form-control tcal" readonly="readonly" id="dateend" placeholder="Дата конца периода" style="cursor: pointer">
		</div>
		<div class="cal-xs-3">
			<input type="button" name="submit" class="btn btn-default" value="Получить данные" onclick="SubmitSearch(0)"/>
		</div>
	</div>
	<hr/>
	<div class="row">
		<div class="col-xs-3 ">
		</div>
		<div class="col-xs-9 ">
			<div class="btn-group" role="group" aria-label="...">
				  <button onclick="SubmitSearch(1)" type="button" class="btn btn-default">1 день</button>
				  <button onclick="SubmitSearch(3)" type="button" class="btn btn-default">3 дня</button>
				  <button onclick="SubmitSearch(7)" type="button" class="btn btn-default">1 неделя</button>
				  <button onclick="SubmitSearch(30)" type="button" class="btn btn-default">1 месяц</button>
			</div>
		</div>
	</div>
		
	<div id="alert-danger-login" class="alert alert-danger" role="alert">
		Укажите логин
	</div>
	
	<div id="alert-danger-datebgn" class="alert alert-danger" role="alert">
		Укажите дату начало периода
	</div>
	
	<div id="alert-danger-dateend" class="alert alert-danger" role="alert">
		Укажите дату конца периода
	</div>

	<hr>	
	<div role="tabpanel">
		<ul id="myTab" class="nav nav-tabs" role="tablist">
			<li role="presentation" class="active"><a href="#autorization" aria-controls="autorization" role="tab" data-toggle="tab">ОШИБКИ АВТОРИЗАЦИИ</a></li>
			<li role="presentation"><a href="#sessions" aria-controls="sessions" role="tab" data-toggle="tab">СПИСОК СЕССИЙ</a></li>		
		</ul>

		<div class="tab-content">
			<div role="tabpanel" class="tab-pane active" id="autorization"></div>
			<div role="tabpanel" class="tab-pane" id="sessions"></div>
		</div>
	</div>

	<script>
		$(function () {
		  $('[data-toggle="popover"]').tooltip()
		});
		$('#myTab a').click(function (e) {
		  e.preventDefault()
		  $(this).tab('show')
		});
		function SubmitSearch(interval) {
			var isValid = true;
			if (interval > 0) {
				isValid = ValidationLogin();
			} 
			else {
				isValid = Validation();
			}
			if (isValid == true) {
				$('#autorization').text("Загрузка...");
				$('#sessions').text("Загрузка...");
				$.get('@Url.Action("GetAccessByLogin", "Radius")', { filial:"1", login:document.getElementById("login").value, datebgn:document.getElementById("datebgn").value, dateend:document.getElementById("dateend").value, interval:interval }, function(data) { 				
					document.getElementById("autorization").innerHTML = data;
				});
				$.get('@Url.Action("GetSessionsByLogin", "Radius")', { filial:"1", login:document.getElementById("login").value, datebgn:document.getElementById("datebgn").value, dateend:document.getElementById("dateend").value, interval:interval }, function(data) { 				
					document.getElementById("sessions").innerHTML = data;
				});
			}
	}
	</script>

</div>